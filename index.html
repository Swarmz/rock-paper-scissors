<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="rps-main">
        <h1 class="rps-title">Rock Paper Scissors</h1>
        <div class="rps-container">
            <div id="computer-selection">
                <img id="computer-selection-img" src="img/empty.png" alt="empty yellow square">
            </div>
            <div class="scoreNames">
                <p id="computerName">COMPUTER</p>
            </div>
            <div class="scorePoints">
                <p id="computerScore">0</p>
                <p id="playerScore">0</p>
            </div>
            <div class="scoreNames">
                <p id="playerName">YOU</p>
            </div>
            <div class="rps-button-container">
                <button class="rpsSelection" type="button" id="rock">
                    <img class="rps-icons" src="./img/rock.png" alt="rock">
                </button>
                <button class="rpsSelection" type="button" id="paper">
                    <img class="rps-icons" src="./img/paper.png" alt="paper">
                </button>
                <button class="rpsSelection" type="button" id="scissors">
                    <img class="rps-icons" src="./img/scissors.png" alt="paper">
                </button>
            </div>
            <div id="results">&uarr; Click to Play! &uarr;</div>  
    </div>
                
    <script>

        function getComputerChoice() {  // get random choice of RPS for computer
            const rockPaperScissors = ["rock", "paper", "scissors"];
            const random = rockPaperScissors[Math.floor(Math.random() * rockPaperScissors.length)]; // random select of rock, paper or scissors from rockPaperScissors array
            return random;
        }

        
        let computerSelectionImage = document.getElementById("computer-selection-img");
        let playerWins = 0;
        let computerWins = 0;

        function getScore() {
            document.getElementById("computerScore").textContent = computerWins;
            document.getElementById("playerScore").textContent = playerWins;
        }
        
        function playRound(playerSelection) {    // generates player choice via prompt vs random comp choice to determine winner
            let computerSelection = getComputerChoice();
            if (playerSelection === "rock") {  
                if (computerSelection === "paper") {
                    computerSelectionImage.src = "img/paper.png";
                    document.getElementById("results").textContent = "You lose! Paper beats rock.";
                    return computerWins += 1, getScore(); 
                }
                else if (computerSelection === "scissors") {
                    computerSelectionImage.src = "img/scissors.png";
                    document.getElementById("results").textContent = "You win! Rock beats scissors.";
                    return playerWins += 1, getScore();
                }
                else {
                    computerSelectionImage.src = "img/rock.png";
                    document.getElementById("results").textContent = "It's a tie! You both chose rock.";
                }
            }
            else if (playerSelection === "paper") {
                if (computerSelection === "scissors") {
                    computerSelectionImage.src = "img/scissors.png";
                    document.getElementById("results").textContent = "You lose! Scissors beats paper.";
                    return computerWins += 1, getScore();
                }
                else if (computerSelection === "rock") {
                    computerSelectionImage.src = "img/rock.png";
                    document.getElementById("results").textContent = "You win! Paper beats rock";
                    return playerWins += 1, getScore();
                }
                else {
                    computerSelectionImage.src = "img/paper.png";
                    document.getElementById("results").textContent = "It's a tie! You both chose paper.";
                }
            }
            else if (playerSelection === "scissors") {
                if (computerSelection === "rock") {
                    computerSelectionImage.src = "img/rock.png";
                    document.getElementById("results").textContent = "You lose! Rock beats scissors.";
                    return computerWins += 1, getScore();
                    
                }
                else if (computerSelection === "paper") {
                    computerSelectionImage.src = "img/paper.png";
                    document.getElementById("results").textContent = "You win! Scissors beats paper";
                    return playerWins += 1, getScore();
                }
                else {
                    computerSelectionImage.src = "img/scissors.png";
                    document.getElementById("results").textContent = "It's a tie! You both chose scissors.";
                }
            }
            else {
                document.getElementById("results").textContent = "Error. Please try again.";
            }
            }
        
        function winner() {
            if (playerWins > computerWins) {
                document.getElementById("results").textContent = "YOU HAVE WON THE MATCH " + playerWins +
                    " TO " + computerWins;
            } else {
                document.getElementById("results").textContent = "YOU HAVE LOST THE MATCH " + computerWins +
                    " TO " + playerWins;
            }
            document.getElementById('rock').classList.add('disable-button');
            document.getElementById('paper').classList.add('disable-button');
            document.getElementById('scissors').classList.add('disable-button');
            setTimeout(scoreReset, 5000);
        }
        
        function scoreReset() {
            computerSelectionImage.src = "img/empty.png";
            playerWins = 0;
            computerWins = 0;
            document.getElementById("computerScore").textContent = computerWins;
            document.getElementById("playerScore").textContent = playerWins;
            computerSelectionImage.classList.add("reset");
            document.getElementById("results").textContent = "↑ Click to play again! ↑"
            document.getElementById('rock').classList.add('enable-button');
            document.getElementById('paper').classList.add('enable-button');
            document.getElementById('scissors').classList.add('enable-button');
        }

        // to do
        // function replay() {
        //      display pop up
        //      if (retryButton = true) {
        //          close pop up
        //          id="results">&darr; Click to Play! &darr;
        //          playerWins = 0;
        //          computerWins = 0;
            


        //     }
        // }

        document.getElementById("rock").addEventListener("click", function(){ playRound("rock"); if(playerWins === 5 || computerWins === 5) {winner();} });
        document.getElementById("paper").addEventListener("click", function(){ playRound("paper"); if(playerWins === 5 || computerWins === 5) {winner();}  });
        document.getElementById("scissors").addEventListener("click", function(){ playRound("scissors"); if(playerWins === 5 || computerWins === 5) {winner();}  });

    </script>


</body>
</html>